{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aphex\\\\Documents\\\\Atom_Projects\\\\webApp\\\\highscore\\\\src\\\\component\\\\JsonProcessor.js\";\nimport React from 'react';\nimport data from './data/scores.json'; //The supplied data\n\nimport Table from './Table.js'; // Constants\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst minimumSubs = 3;\nconst maximumSubs = 24;\nconst leaderBoardSize = 10;\n\nfunction JsonProcessor() {\n  var table = []; // The data for the table\n\n  var player = []; // The playet names\n\n  var position = []; // The players \"rank\" in the table\n  // Iterate through the JSON data\n\n  for (var i = 0; i < data.length; i++) {\n    var name = data[i];\n\n    if (name.submissions.length > minimumSubs) {\n      // Ruling out players with less than 3 submissions\n      var array = name.submissions;\n      var scoreTotal = [];\n\n      for (var j = 0; j < array.length; j++) {\n        var scores = array[j];\n        scoreTotal.push(scores.score);\n      }\n\n      var entry = [];\n      entry.push(name.name);\n      entry.push(accumulateScores(scoreTotal)); // Totalling submissions for each player\n\n      table.push(entry); // This is the Score and Name data for the highscore table\n    }\n  } // Sorting table data in score order\n\n\n  table.sort(function (a, b) {\n    return b[1] - a[1];\n  }); // Reducing the size of our table to the most successful participants\n\n  table.length = leaderBoardSize; // Calculating the positions of each entry and adding it to the table array\n\n  position.push(calculatePostion(table, position));\n\n  for (var n = 0; n < table.length; n++) {\n    table[n].push(position[n]);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      data: table\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 10\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this) // Rendering the table\n  ;\n} // This function iterates through the sorted scores and adds them up.\n// It sorts the scores in order of size and adds up the first 24 as per\n// requirement.\n\n\n_c = JsonProcessor;\n\nfunction accumulateScores(input) {\n  var sum = 0;\n  var test = 0; // Sorting the scores so we can add up the best submissions\n\n  input.sort(function (a, b) {\n    return b - a;\n  });\n\n  for (var k = 0; k < input.length; k++) {\n    //Adding up everything\n    if (k <= maximumSubs - 1) {\n      // Keeping sumissions to the best 24.\n      sum += input[k];\n      test++;\n    }\n  }\n\n  return sum;\n} // This function ensures that the rankings are fair. People with equal scores\n// should have equal ranks.\n\n\nfunction calculatePostion(arr, position) {\n  position.push(1);\n\n  for (var m = 1; m < arr.length; m++) {\n    if (arr[m][1] == arr[m - 1][1]) {\n      position.push(position[m - 1]);\n    } else {\n      position.push(position[m - 1] + 1);\n    }\n  }\n\n  return position;\n}\n\nexport default JsonProcessor;\n\nvar _c;\n\n$RefreshReg$(_c, \"JsonProcessor\");","map":{"version":3,"sources":["C:/Users/aphex/Documents/Atom_Projects/webApp/highscore/src/component/JsonProcessor.js"],"names":["React","data","Table","minimumSubs","maximumSubs","leaderBoardSize","JsonProcessor","table","player","position","i","length","name","submissions","array","scoreTotal","j","scores","push","score","entry","accumulateScores","sort","a","b","calculatePostion","n","input","sum","test","k","arr","m"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport data from './data/scores.json' //The supplied data\r\nimport Table from './Table.js'\r\n\r\n// Constants\r\nconst minimumSubs = 3;\r\nconst maximumSubs = 24;\r\nconst leaderBoardSize = 10;\r\n\r\nfunction JsonProcessor() {\r\n    var table = []; // The data for the table\r\n    var player = []; // The playet names\r\n    var position = []; // The players \"rank\" in the table\r\n\r\n    // Iterate through the JSON data\r\n    for(var i = 0; i < data.length; i++){\r\n      var name = data[i];\r\n      if(name.submissions.length > minimumSubs) { // Ruling out players with less than 3 submissions\r\n          var array = name.submissions;\r\n          var scoreTotal = [];\r\n\r\n          for(var j = 0; j < array.length; j++){\r\n            var scores = array[j];\r\n            scoreTotal.push(scores.score);\r\n        }\r\n        var entry = [];\r\n        entry.push(name.name);\r\n        entry.push(accumulateScores(scoreTotal)); // Totalling submissions for each player\r\n        table.push(entry); // This is the Score and Name data for the highscore table\r\n      }\r\n    }\r\n\r\n      // Sorting table data in score order\r\n      table.sort(function(a,b) {\r\n        return b[1] - a[1];\r\n      });\r\n\r\n      // Reducing the size of our table to the most successful participants\r\n      table.length = leaderBoardSize;\r\n\r\n      // Calculating the positions of each entry and adding it to the table array\r\n      position.push(calculatePostion(table, position));\r\n      for(var n = 0; n < table.length; n++){\r\n        table[n].push(position[n]);\r\n      }\r\n\r\n  return (\r\n    <div><Table data={table}/></div> // Rendering the table\r\n  );\r\n}\r\n\r\n\r\n// This function iterates through the sorted scores and adds them up.\r\n// It sorts the scores in order of size and adds up the first 24 as per\r\n// requirement.\r\nfunction accumulateScores(input){\r\n  var sum = 0;\r\n  var test = 0;\r\n\r\n  // Sorting the scores so we can add up the best submissions\r\n  input.sort(function(a,b) {\r\n    return b - a;\r\n  });\r\n\r\n  for(var k = 0; k < input.length; k++){ //Adding up everything\r\n    if(k <= maximumSubs - 1){ // Keeping sumissions to the best 24.\r\n        sum += input[k];\r\n        test ++;\r\n      }\r\n    }\r\n    return(sum);\r\n  }\r\n\r\n// This function ensures that the rankings are fair. People with equal scores\r\n// should have equal ranks.\r\nfunction calculatePostion(arr, position) {\r\n  position.push(1);\r\n  for(var m = 1; m < arr.length; m++){\r\n    if(arr[m][1] == arr[m - 1][1]){\r\n      position.push(position[m - 1])\r\n    } else {\r\n      position.push(position[m - 1] + 1)\r\n    }\r\n  }\r\n      return(position);\r\n}\r\n\r\n\r\nexport default JsonProcessor;\r\n"]},"metadata":{},"sourceType":"module"}